







promise_test(async () => {
  const img = document.createElement("img");
  img.src = "resources/image-alternate-no-store.py";
  await img.decode();
  let width = img.naturalWidth;

  img.src = img.src;
  await img.decode();
  assert_equals(width, img.naturalWidth, "The image size should be the same");
}, "Reassigning the same src value should not trigger an extra image fetch");
