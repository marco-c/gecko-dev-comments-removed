





import fs from 'node:fs';













const bad = readConfig(process.argv[2]);
const good = readConfig(process.argv[3]);

function readConfig(filepath: string): object {
  return JSON.parse(fs.readFileSync(filepath, 'utf-8'));
}

function getFeatures(config: object) {
  const enabledFeatures = new Set();
  const distabledFeatures = new Set();
  for (const key of Object.keys(config)) {
    const item = config[key];
    for (const subitem of item) {
      
      
      const exp = subitem['experiments'][0];
      for (const feature of exp['enable_features'] ?? []) {
        enabledFeatures.add(feature);
      }
      for (const feature of exp['disable_features'] ?? []) {
        enabledFeatures.add(feature);
      }
    }
  }
  return {enabledFeatures, distabledFeatures};
}

const {
  enabledFeatures: badEnabledFeatures,
  distabledFeatures: badDisabledFeatures,
} = getFeatures(bad);

const {
  enabledFeatures: goodEnabledFeatures,
  distabledFeatures: goodDisabledFeatures,
} = getFeatures(good);

for (const badFeature of badEnabledFeatures) {
  if (!goodEnabledFeatures.has(badFeature)) {
    console.log(`'${badFeature}',`);
  }
}

for (const goodFeature of goodDisabledFeatures) {
  if (!badDisabledFeatures.has(goodFeature)) {
    console.log(`'${goodFeature}',`);
  }
}
