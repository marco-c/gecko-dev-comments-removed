


"use strict";




add_task(async function () {
  await openPreferencesViaOpenPreferencesAPI("paneSync", {
    leaveOpen: true,
  });

  await SpecialPowers.pushPrefEnv({
    set: [["browser.backup.archive.enabled", false]],
  });

  let settings = gBrowser.contentDocument.querySelector(
    "setting-group[groupid='backup']"
  );
  console.log("show me", settings);
  ok(
    BrowserTestUtils.isHidden(settings),
    "backup setting-group is not visible"
  );

  
  await evaluateSearchResults("backup", "no-results-message");

  BrowserTestUtils.removeTab(gBrowser.selectedTab);
});




add_task(async function () {
  await SpecialPowers.pushPrefEnv({
    set: [["browser.backup.archive.enabled", true]],
  });

  await openPreferencesViaOpenPreferencesAPI("paneSync", {
    leaveOpen: true,
  });

  let settings = gBrowser.contentDocument.querySelector(
    "setting-group[groupid='backup']"
  );
  ok(BrowserTestUtils.isVisible(settings), "backup setting-group is visible");

  
  await evaluateSearchResults("backup", "backup");

  BrowserTestUtils.removeTab(gBrowser.selectedTab);
});
