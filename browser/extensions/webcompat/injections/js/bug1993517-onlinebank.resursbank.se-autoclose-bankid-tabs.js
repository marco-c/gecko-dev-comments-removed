



"use strict";








if (!window.__firefoxWebCompatFixBug1993517) {
  Object.defineProperty(window, "__firefoxWebCompatFixBug1993517", {
    configurable: false,
    value: true,
  });

  console.info(
    'Dropping target="_blank" attribute for bankid logins for compatibility reasons. See https://bugzilla.mozilla.org/show_bug.cgi?id=1993517 for details.'
  );

  if (/Win32|Win64|Windows|WinCE/i.test(navigator.platform)) {
    const nav = Object.getPrototypeOf(navigator);
    const platform = Object.getOwnPropertyDescriptor(nav, "platform");
    platform.get = () => "MacIntel";
    Object.defineProperty(nav, "platform", platform);
  }

  document.addEventListener(
    "click",
    e => e.target?.closest("a[href^='bankid://']")?.removeAttribute("target"),
    true
  );
}
