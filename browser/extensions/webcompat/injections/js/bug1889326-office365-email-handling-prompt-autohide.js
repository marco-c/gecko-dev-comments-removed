



"use strict";









if (!window.__firefoxWebCompatFixBug1709653) {
  Object.defineProperty(window, "__firefoxWebCompatFixBug1709653", {
    configurable: false,
    value: true,
  });

  const warning =
    "Office 365 Outlook email handling prompt has been hidden. See https://bugzilla.mozilla.org/show_bug.cgi?id=1709653 for details.";

  const localStorageKey = "mailProtocolHandlerAlreadyOffered";

  const proto = Object.getPrototypeOf(navigator);
  const { registerProtocolHandler } = proto;
  const { localStorage } = window;

  proto.registerProtocolHandler = function (scheme, url, title) {
    if (localStorage.getItem(localStorageKey)) {
      console.info(warning);
      return undefined;
    }
    registerProtocolHandler.call(this, scheme, url, title);
    localStorage.setItem(localStorageKey, true);
    return undefined;
  };
}
