



"use strict";










if (!window.__firefoxWebCompatFixBug1756970) {
  Object.defineProperty(window, "__firefoxWebCompatFixBug1756970", {
    configurable: false,
    value: true,
  });

  console.info(
    "performance.now precision has been modified for compatibility reasons. See https://bugzilla.mozilla.org/show_bug.cgi?id=1756970 for details."
  );

  let counter = 0;
  let previousVal = 0;

  const perf = Object.getPrototypeOf(performance);
  const now = perf.now;
  perf.now = function () {
    let originalVal = now.call(this);
    if (originalVal === previousVal) {
      originalVal += 0.00000003 * ++counter;
    } else {
      previousVal = originalVal;
      counter = 0;
    }
    return originalVal;
  };
}
