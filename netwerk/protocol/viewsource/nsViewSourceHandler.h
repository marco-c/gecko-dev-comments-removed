




#ifndef nsViewSourceHandler_h_
#define nsViewSourceHandler_h_

#include "nsIProtocolHandler.h"
#include "nsNetUtil.h"

class nsILoadInfo;

namespace mozilla {
namespace net {

class nsViewSourceHandler final : public nsIProtocolHandlerWithDynamicFlags,
                                  public nsIProtocolHandler {
 public:
  NS_DECL_ISUPPORTS
  NS_DECL_NSIPROTOCOLHANDLER
  NS_DECL_NSIPROTOCOLHANDLERWITHDYNAMICFLAGS

  nsViewSourceHandler();

  
  
  [[nodiscard]] nsresult NewSrcdocChannel(nsIURI* aURI, nsIURI* aBaseURI,
                                          const nsAString& aSrcdoc,
                                          nsILoadInfo* aLoadInfo,
                                          nsIChannel** outChannel);

  static nsViewSourceHandler* GetInstance();

  static nsresult CreateNewURI(const nsACString& aSpec, const char* aCharset,
                               nsIURI* aBaseURI, nsIURI** aResult);

 private:
  ~nsViewSourceHandler();

  static nsViewSourceHandler* gInstance;
};

}  
}  

#endif 
