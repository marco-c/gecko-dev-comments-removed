



"use strict";



const NotificationKind_ActionCompleted = 2;

const NotificationProcessing_ImportantAll = 0;
const NotificationProcessing_All = 2;


addUiaTask(
  `
<button id="button"></button>
<main id="main"><p id="p">abc</p></main>
  `,
  async function testNotification(browser) {
    info("button.ariaNotify a normal");
    await setUpWaitForUiaEvent("Notification", "button");
    await invokeContentTask(browser, [], () => {
      content.button = content.document.getElementById("button");
      content.button.ariaNotify("a");
    });
    await waitForUiaEvent();
    ok(true, "Got Notification event");
    is(await runPython(`event.displayString`), "a", "displayString correct");
    is(
      await runPython(`event.notificationKind`),
      NotificationKind_ActionCompleted,
      "notificationKind correct"
    );
    is(
      await runPython(`event.notificationProcessing`),
      NotificationProcessing_All,
      "notificationProcessing correct"
    );

    info("button.ariaNotify b high");
    await setUpWaitForUiaEvent("Notification", "button");
    await invokeContentTask(browser, [], () => {
      content.button.ariaNotify("b", { priority: "high" });
    });
    await waitForUiaEvent();
    ok(true, "Got Notification event");
    is(await runPython(`event.displayString`), "b", "displayString correct");
    is(
      await runPython(`event.notificationProcessing`),
      NotificationProcessing_ImportantAll,
      "notificationProcessing correct"
    );

    info("doc.ariaNotify c");
    await setUpWaitForUiaEvent("Notification", DEFAULT_CONTENT_DOC_BODY_ID);
    await invokeContentTask(browser, [], () => {
      content.document.ariaNotify("c");
    });
    await waitForUiaEvent();
    ok(true, "Got Notification event");
    is(await runPython(`event.displayString`), "c", "displayString correct");

    info("p.ariaNotify d");
    
    await setUpWaitForUiaEvent("Notification", "main");
    await invokeContentTask(browser, [], () => {
      content.document.getElementById("p").ariaNotify("d");
    });
    await waitForUiaEvent();
    ok(true, "Got Notification event on button");
    is(await runPython(`event.displayString`), "d", "displayString correct");
  },
  
  { uiaEnabled: true, uiaDisabled: false }
);
