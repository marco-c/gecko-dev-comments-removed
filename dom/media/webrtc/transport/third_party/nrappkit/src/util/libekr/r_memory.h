






































#ifndef _r_memory_h
#define _r_memory_h

char *r_strdup(const char *str);

#define NO_MALLOC_REPLACE 1
#ifdef NO_MALLOC_REPLACE

#ifndef RMALLOC
#define RMALLOC(a) malloc(a)
#endif

#ifndef RCALLOC_RAWSIZE
#define RCALLOC_RAWSIZE(a) calloc(1,a)
#endif

#ifndef R_NEW
#define R_NEW(type) (type*)calloc(1,sizeof(type))
#endif

#ifndef R_NEW_CNT
#define R_NEW_CNT(type,cnt) (type*)calloc(cnt,sizeof(type))
#endif

#ifndef RFREE
#define RFREE(a) if(a) free(a)
#endif


#else


void *r_malloc(int type, size_t size);
void *r_calloc(int type,size_t number,size_t size);
void r_free   (void *ptr);

#ifndef R_MALLOC_TYPE
#define R_MALLOC_TYPE   0
#endif

#ifndef RMALLOC
#define RMALLOC(a) r_malloc(R_MALLOC_TYPE,a)
#endif

#ifndef RCALLOC_RAWSIZE
#define RCALLOC_RAWSIZE(a) r_calloc(R_MALLOC_TYPE,1,a)
#endif

#ifndef R_NEW
#define R_NEW(type) (type*)r_calloc(R_MALLOC_TYPE,1,sizeof(type))
#endif

#ifndef R_NEW_CNT
#define R_NEW_CNT(type,cnt) (type*)r_calloc(R_MALLOC_TYPE,cnt,sizeof(type))
#endif

#ifndef RFREE
#define RFREE(a) if(a) r_free(a)
#endif


#endif


#endif

