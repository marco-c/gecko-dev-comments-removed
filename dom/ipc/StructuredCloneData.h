





#ifndef mozilla_dom_ipc_StructuredCloneData_h
#define mozilla_dom_ipc_StructuredCloneData_h

#include "mozilla/dom/StructuredCloneHolder.h"
#include "nsISupportsImpl.h"

namespace IPC {
class MessageReader;
class MessageWriter;
template <typename T>
struct ParamTypes;
}  

namespace mozilla::dom::ipc {











class StructuredCloneData : public StructuredCloneHolder {
 public:
  NS_INLINE_DECL_THREADSAFE_REFCOUNTING(StructuredCloneData);

  
  
  StructuredCloneData();

  
  StructuredCloneData(StructuredCloneScope aScope,
                      TransferringSupport aSupportsTransferring);

  
  
  bool CopyExternalData(const char* aData, size_t aDataLength);

  bool SupportsTransferring() { return mSupportsTransferring; }

  
  void WriteIPCParams(IPC::MessageWriter* aWriter);
  bool ReadIPCParams(IPC::MessageReader* aReader);

 protected:
  ~StructuredCloneData();
};

}  

namespace IPC {

template <>
struct ParamTraits<mozilla::dom::ipc::StructuredCloneData*> {
  using paramType = mozilla::dom::ipc::StructuredCloneData;
  static void Write(MessageWriter* aWriter, paramType* aParam);
  static bool Read(MessageReader* aReader, RefPtr<paramType>* aResult);
};

}  

#endif  
