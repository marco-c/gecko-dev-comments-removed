




#ifndef GPU_PROMISE_HELPERS_H_
#define GPU_PROMISE_HELPERS_H_

#include "mozilla/dom/Promise.h"
















namespace mozilla::webgpu::promise {

void MaybeRejectWithTypeError(RefPtr<dom::Promise>&& promise,
                              nsCString&& aMessage);
void MaybeRejectWithOperationError(RefPtr<dom::Promise>&& promise,
                                   nsCString&& aMessage);
void MaybeRejectWithAbortError(RefPtr<dom::Promise>&& promise,
                               nsCString&& aMessage);
void MaybeRejectWithNotSupportedError(RefPtr<dom::Promise>&& promise,
                                      nsCString&& aMessage);
void MaybeRejectWithInvalidStateError(RefPtr<dom::Promise>&& promise,
                                      nsCString&& aMessage);
void MaybeRejectWithPipelineError(RefPtr<dom::Promise>&& promise,
                                  RefPtr<PipelineError>&& aError);

void MaybeResolveWithUndefined(RefPtr<dom::Promise>&& promise);
void MaybeResolveWithNull(RefPtr<dom::Promise>&& promise);

template <typename T>
void MaybeResolve(RefPtr<dom::Promise>&& promise, RefPtr<T>&& aArg) {
  NS_DispatchToCurrentThread(NewCancelableRunnableMethod<RefPtr<T>>(
      "webgpu::PromiseHelpers::MaybeResolve", std::move(promise),
      &dom::Promise::MaybeResolve<RefPtr<T>>, std::move(aArg)));
}

}  

#endif  
