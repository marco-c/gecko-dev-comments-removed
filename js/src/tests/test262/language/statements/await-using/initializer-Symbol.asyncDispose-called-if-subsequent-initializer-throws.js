












































asyncTest(async function () {
  var resource = {
    disposed: false,
    async [Symbol.asyncDispose]() {
        this.disposed = true;
    }
  };

  function getResource() {
    throw new Error();
  }

  await assert.throwsAsync(Error, async function () {
    await using _1 = resource, _2 = getResource();
  });

  assert.sameValue(resource.disposed, true, 'Expected resource to have been disposed');
});
