
















































asyncTest(async function () {
  var resource = {
      disposed: false,
      [Symbol.dispose]() {
          this.disposed = true;
      }
  };

  function getResource() {
    throw new Error();
  }

  await assert.throwsAsync(Error, async function () {
    var i = 0;
    for (await using _1 = resource, _2 = getResource(); i < 1; i++) {
    }
  }, 'for');

  assert.sameValue(resource.disposed, true, 'Expected resource to have been disposed');
});
