




































































var resource = {
    disposed: false,
    [Symbol.dispose]() {
        this.disposed = true;
    }
};

function * f() {
    using _ = resource;
    yield;
}

var g = f();
var wasDisposedBeforeGeneratorStarted = resource.disposed;
g.next();
var wasDisposedWhileSuspended = resource.disposed;
assert.sameValue(g.next().done, true);
var isDisposedAfterGeneratorCompleted = resource.disposed;

assert.sameValue(wasDisposedBeforeGeneratorStarted, false, 'Expected resource to not have been disposed prior to generator start');
assert.sameValue(wasDisposedWhileSuspended, false, 'Expected resource to not have been disposed while generator is suspended');
assert.sameValue(isDisposedAfterGeneratorCompleted, true, 'Expected resource to have been disposed after generator completed');

reportCompare(0, 0);
