










const calendar = "hebrew";
const options = { overflow: "reject" };




















{
  const end = Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M08", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  for (const largestUnit of ["years", "months"]) {
    TemporalHelpers.assertDuration(
      Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M07", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options).since(end, { largestUnit }),
      0, -1, 0, 0, 0, 0, 0, 0, 0, 0,
      `Nisan 29th to Iyar 29th is one month (${largestUnit})`
    );
    TemporalHelpers.assertDuration(
      Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M07", day: 30, hour: 12, minute: 34, timeZone: "UTC", calendar }, options).since(end, { largestUnit }),
      0, 0, 0, -29, 0, 0, 0, 0, 0, 0,
      `Nisan 30th to Iyar 29th is 29 days, not one month (${largestUnit})`
    );
  }
}



{
  const end = Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M12", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  for (const largestUnit of ["years", "months"]) {
    TemporalHelpers.assertDuration(
      Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M09", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options).since(end, { largestUnit }),
      0, -3, 0, 0, 0, 0, 0, 0, 0, 0,
      `Sivan 29th to Elul 29th is 3 months (${largestUnit})`
    );
    TemporalHelpers.assertDuration(
      Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M09", day: 30, hour: 12, minute: 34, timeZone: "UTC", calendar }, options).since(end, { largestUnit }),
      0, -2, 0, -29, 0, 0, 0, 0, 0, 0,
      `Sivan 30th to Elul 29th is 2 months 29 days, not 3 months (${largestUnit})`
    );
  }
}



{
  const end = Temporal.ZonedDateTime.from({ year: 5786, monthCode: "M04", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  const start1 = Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M11", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  const start2 = Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M11", day: 30, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  TemporalHelpers.assertDuration(
    start1.since(end, { largestUnit: "months" }),
    0, -30, 0, 0, 0, 0, 0, 0, 0, 0,
    "Av 29th 5783 to Tevet 29th 5786 is 30 months"
  );
  TemporalHelpers.assertDuration(
    start1.since(end, { largestUnit: "years" }),
    -2, -5, 0, 0, 0, 0, 0, 0, 0, 0,
    "Av 29th 5783 to Tevet 29th 5786 is 2 years, 5 months"
  );
  TemporalHelpers.assertDuration(
    start2.since(end, { largestUnit: "months" }),
    0, -29, 0, -29, 0, 0, 0, 0, 0, 0,
    "Av 30th 5783 to Tevet 29th 5786 is 29 months, 29 days, not 30 months"
  );
  TemporalHelpers.assertDuration(
    start2.since(end, { largestUnit: "years" }),
    -2, -4, 0, -29, 0, 0, 0, 0, 0, 0,
    "Av 30th 5783 to Tevet 29th 5786 is 2 years, 4 months, 29 days, not 2 years 5 months"
  );
}


{
  const end = Temporal.ZonedDateTime.from({ year: 5784, monthCode: "M02", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  const start1 = Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M02", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  const start2 = Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M02", day: 30, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  TemporalHelpers.assertDuration(
    start1.since(end, { largestUnit: "months" }),
    0, -12, 0, 0, 0, 0, 0, 0, 0, 0,
    "29th Kislev 5783 to 29th Kislev 5784 (deficient year) is 12 months"
  );
  TemporalHelpers.assertDuration(
    start1.since(end, { largestUnit: "years" }),
    -1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    "29th Kislev 5783 to 29th Kislev 5784 (deficient year) is 1 year"
  );
  TemporalHelpers.assertDuration(
    start2.since(end, { largestUnit: "months" }),
    0, -11, 0, -29, 0, 0, 0, 0, 0, 0,
    "30th Kislev 5783 to 29th Kislev 5784 (deficient year) is 11 months 29 days, not 12 months"
  );
  TemporalHelpers.assertDuration(
    start2.since(end, { largestUnit: "years" }),
    0, -11, 0, -29, 0, 0, 0, 0, 0, 0,
    "30th Kislev 5783 to 29th Kislev 5784 (deficient year) is 11 months 29 days, not 1 year"
  );
}


{
  const end = Temporal.ZonedDateTime.from({ year: 5784, monthCode: "M03", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  const start1 = Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M03", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  const start2 = Temporal.ZonedDateTime.from({ year: 5783, monthCode: "M03", day: 30, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  TemporalHelpers.assertDuration(
    start1.since(end, { largestUnit: "months" }),
    0, -12, 0, 0, 0, 0, 0, 0, 0, 0,
    "29th Cheshvan 5783 to 29th Cheshvan 5784 (deficient year) is 12 months"
  );
  TemporalHelpers.assertDuration(
    start1.since(end, { largestUnit: "years" }),
    -1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    "29th Cheshvan 5783 to 29th Cheshvan 5784 (deficient year) is 1 year"
  );
  TemporalHelpers.assertDuration(
    start2.since(end, { largestUnit: "months" }),
    0, -11, 0, -29, 0, 0, 0, 0, 0, 0,
    "30th Cheshvan 5783 to 29th Cheshvan 5784 (deficient year) is 11 months 29 days, not 12 months"
  );
  TemporalHelpers.assertDuration(
    start2.since(end, { largestUnit: "years" }),
    0, -11, 0, -29, 0, 0, 0, 0, 0, 0,
    "30th Cheshvan 5783 to 29th Cheshvan 5784 (deficient year) is 11 months 29 days, not 1 year"
  );
}


{
  const end = Temporal.ZonedDateTime.from({ year: 5785, monthCode: "M06", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  const start1 = Temporal.ZonedDateTime.from({ year: 5784, monthCode: "M05L", day: 29, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  const start2 = Temporal.ZonedDateTime.from({ year: 5784, monthCode: "M05L", day: 30, hour: 12, minute: 34, timeZone: "UTC", calendar }, options);
  TemporalHelpers.assertDuration(
    start1.since(end, { largestUnit: "months" }),
    0, -13, 0, 0, 0, 0, 0, 0, 0, 0,
    "29th Adar I 5784 to 29th Adar 5785 is 13 months"
  );
  TemporalHelpers.assertDuration(
    start1.since(end, { largestUnit: "years" }),
    -1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    "29th Adar I 5784 to 29th Adar 5785 is 1 year"
  );
  TemporalHelpers.assertDuration(
    start2.since(end, { largestUnit: "months" }),
    0, -12, 0, -29, 0, 0, 0, 0, 0, 0,
    "30th Adar I 5784 to 29th Adar 5785 is 12 months 29 days, not 13 months"
  );
  TemporalHelpers.assertDuration(
    start2.since(end, { largestUnit: "years" }),
    0, -12, 0, -29, 0, 0, 0, 0, 0, 0,
    "30th Adar I 5784 to 29th Adar 5785 is 12 months 29 days, not 1 year"
  );
}

reportCompare(0, 0);
