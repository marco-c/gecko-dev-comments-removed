



use thiserror::Error;

use crate::{errors::IPCError, messages::MessageError, platform::PlatformError, IPCListenerError};





#[derive(Debug, Error)]
pub enum IPCQueueError {
    #[error("Could not create queue: {0}")]
    CreationFailure(PlatformError),
    #[error("Could not register with queue: {0}")]
    RegistrationFailure(PlatformError),
    #[error("Could not wait for events: {0}")]
    WaitError(PlatformError),
    #[error("Underlying IPC connector error: {0}")]
    IPCError(#[from] IPCError),
    #[error("Underlying IPC listener error: {0}")]
    IPCListenerError(#[from] IPCListenerError),
    #[error("Underlying message error: {0}")]
    MessageError(#[from] MessageError),
}





#[cfg(target_os = "windows")]
pub use windows::IPCQueue;

#[cfg(target_os = "windows")]
pub(crate) mod windows;





#[cfg(any(target_os = "android", target_os = "linux"))]
pub use unix::IPCQueue;

#[cfg(any(target_os = "android", target_os = "linux"))]
pub(crate) mod unix;





#[cfg(any(target_os = "ios", target_os = "macos"))]
pub use mach::IPCQueue;

#[cfg(any(target_os = "ios", target_os = "macos"))]
pub(crate) mod mach;
