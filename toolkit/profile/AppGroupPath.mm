







#import <Foundation/Foundation.h>

#include "nsCOMPtr.h"
#include "nsIFile.h"
#include "nsString.h"

nsresult GetAppGroupContainerBase(nsIFile** aResult) {
  NSString* groupID = @"43AQ936H96.org.mozilla.firefox.browserprofiles";
  NSURL* containerURL = [[NSFileManager defaultManager]
      containerURLForSecurityApplicationGroupIdentifier:groupID];

  if (!containerURL) {
    return NS_ERROR_FAILURE;
  }

  NSString* path = [containerURL path];
  nsCOMPtr<nsIFile> file;
  nsresult rv = NS_NewLocalFile(NS_ConvertUTF8toUTF16([path UTF8String]),
                                getter_AddRefs(file));
  NS_ENSURE_SUCCESS(rv, rv);

  file.forget(aResult);
  return NS_OK;
}
