



"use strict";





class ApplicationPanel {
  









  constructor(panelWin, toolbox, commands) {
    this.panelWin = panelWin;
    this.toolbox = toolbox;
    this.commands = commands;
  }

  async open() {
    await this.panelWin.Application.bootstrap({
      toolbox: this.toolbox,
      commands: this.commands,
      panel: this,
    });

    return this;
  }

  destroy() {
    this.panelWin.Application.destroy();
    this.panelWin = null;
    this.toolbox = null;
    this.emit("destroyed");
  }

  




  onToolboxChromeEventHandlerEscapeKeyDown(abortController) {
    
    
    const popoverEl = this.panelWin.document.querySelector(":popover-open");
    if (popoverEl) {
      abortController.abort();
      popoverEl.hidePopover();
    }
  }
}

exports.ApplicationPanel = ApplicationPanel;
