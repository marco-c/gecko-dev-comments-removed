









#ifndef VIDEO_TIMING_SIMULATOR_TEST_ENCODED_FRAME_GENERATORS_H_
#define VIDEO_TIMING_SIMULATOR_TEST_ENCODED_FRAME_GENERATORS_H_

#include <cstdint>
#include <memory>

#include "api/environment/environment.h"
#include "api/video/encoded_frame.h"
#include "test/fake_encoded_frame.h"

namespace webrtc::video_timing_simulator {


class EncodedFrameBuilderGenerator {
 public:
  static constexpr uint32_t kSsrc = 123456;

  struct BuilderWithFrameId {
    test::FakeFrameBuilder builder;
    int64_t frame_id;
  };

  explicit EncodedFrameBuilderGenerator(const Environment& env);
  ~EncodedFrameBuilderGenerator();

  BuilderWithFrameId NextEncodedFrameBuilder();

 private:
  const Environment env_;

  uint32_t rtp_timestamp_ = 0;
  int64_t frame_id_ = 0;
};







class SingleLayerEncodedFrameGenerator {
 public:
  explicit SingleLayerEncodedFrameGenerator(const Environment& env);
  ~SingleLayerEncodedFrameGenerator();

  std::unique_ptr<EncodedFrame> NextEncodedFrame();

 private:
  EncodedFrameBuilderGenerator builder_generator_;
};













class TemporalLayersEncodedFrameGenerator {
 public:
  static constexpr int kNumTemporalLayers = 4;

  explicit TemporalLayersEncodedFrameGenerator(const Environment& env);
  ~TemporalLayersEncodedFrameGenerator();

  std::unique_ptr<EncodedFrame> NextEncodedFrame();

 private:
  EncodedFrameBuilderGenerator builder_generator_;
};

}  

#endif  
