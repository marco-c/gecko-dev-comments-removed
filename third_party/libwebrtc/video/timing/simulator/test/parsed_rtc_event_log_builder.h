









#ifndef VIDEO_TIMING_SIMULATOR_TEST_PARSED_RTC_EVENT_LOG_BUILDER_H_
#define VIDEO_TIMING_SIMULATOR_TEST_PARSED_RTC_EVENT_LOG_BUILDER_H_

#include <cstdint>
#include <memory>

#include "api/environment/environment.h"
#include "api/rtc_event_log/rtc_event.h"
#include "api/rtc_event_log/rtc_event_log.h"
#include "api/units/time_delta.h"
#include "api/units/timestamp.h"
#include "logging/rtc_event_log/rtc_event_log_parser.h"
#include "system_wrappers/include/clock.h"

namespace webrtc::video_timing_simulator {


class ParsedRtcEventLogBuilder {
 public:
  ParsedRtcEventLogBuilder();
  ~ParsedRtcEventLogBuilder();

  ParsedRtcEventLogBuilder(const ParsedRtcEventLogBuilder&) = delete;
  ParsedRtcEventLogBuilder& operator=(const ParsedRtcEventLogBuilder&) = delete;

  
  
  Timestamp CurrentTime();
  void AdvanceTime(TimeDelta duration);

  
  
  void LogVideoRecvConfig(uint32_t ssrc);
  void LogRtpPacketIncoming(uint32_t ssrc);

  
  std::unique_ptr<ParsedRtcEventLog> Build();

 private:
  
  void Log(std::unique_ptr<RtcEvent> event);

  
  
  
  
  SimulatedClock log_clock_;
  const Environment log_env_;
  std::unique_ptr<RtcEventLog> log_;
  std::unique_ptr<ParsedRtcEventLog> parsed_log_;
};

}  

#endif  
