We cherry-picked this in bug 2012006.
