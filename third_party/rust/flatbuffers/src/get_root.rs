















use crate::{
    Follow, ForwardsUOffset, InvalidFlatbuffer, SkipSizePrefix, Verifiable, Verifier,
    VerifierOptions,
};





pub fn root<'buf, T>(data: &'buf [u8]) -> Result<T::Inner, InvalidFlatbuffer>
where
    T: 'buf + Follow<'buf> + Verifiable,
{
    let opts = VerifierOptions::default();
    root_with_opts::<T>(&opts, data)
}

#[inline]




pub fn root_with_opts<'opts, 'buf, T>(
    opts: &'opts VerifierOptions,
    data: &'buf [u8],
) -> Result<T::Inner, InvalidFlatbuffer>
where
    T: 'buf + Follow<'buf> + Verifiable,
{
    let mut v = Verifier::new(opts, data);
    <ForwardsUOffset<T>>::run_verifier(&mut v, 0)?;
    
    
    Ok(unsafe { root_unchecked::<T>(data) })
}

#[inline]




pub fn size_prefixed_root<'buf, T>(data: &'buf [u8]) -> Result<T::Inner, InvalidFlatbuffer>
where
    T: 'buf + Follow<'buf> + Verifiable,
{
    let opts = VerifierOptions::default();
    size_prefixed_root_with_opts::<T>(&opts, data)
}

#[inline]




pub fn size_prefixed_root_with_opts<'opts, 'buf, T>(
    opts: &'opts VerifierOptions,
    data: &'buf [u8],
) -> Result<T::Inner, InvalidFlatbuffer>
where
    T: 'buf + Follow<'buf> + Verifiable,
{
    let mut v = Verifier::new(opts, data);
    <SkipSizePrefix<ForwardsUOffset<T>>>::run_verifier(&mut v, 0)?;
    
    
    Ok(unsafe { size_prefixed_root_unchecked::<T>(data) })
}

#[inline]






pub unsafe fn root_unchecked<'buf, T>(data: &'buf [u8]) -> T::Inner
where
    T: Follow<'buf> + 'buf,
{
    <ForwardsUOffset<T>>::follow(data, 0)
}

#[inline]






pub unsafe fn size_prefixed_root_unchecked<'buf, T>(data: &'buf [u8]) -> T::Inner
where
    T: Follow<'buf> + 'buf,
{
    <SkipSizePrefix<ForwardsUOffset<T>>>::follow(data, 0)
}
