



















#![cfg(feature = "derive")]

use testutil::{set_rustflags_w_warnings, ToolchainVersion};

#[test]
#[cfg_attr(miri, ignore)]
fn ui() {
    let version = ToolchainVersion::extract_from_pwd().unwrap();
    
    
    let source_files_dirname = version.get_ui_source_files_dirname_and_maybe_print_warning();

    
    
    set_rustflags_w_warnings();

    let t = trybuild::TestCases::new();
    t.compile_fail(format!("tests/{}/*.rs", source_files_dirname));
}

#[test]
#[cfg_attr(miri, ignore)]
fn ui_invalid_impls() {
    let version = ToolchainVersion::extract_from_pwd().unwrap();
    
    
    let source_files_dirname = version.get_ui_source_files_dirname_and_maybe_print_warning();

    
    
    set_rustflags_w_warnings();

    let t = trybuild::TestCases::new();
    t.compile_fail(format!("tests/{}/invalid-impls/*.rs", source_files_dirname));
}
