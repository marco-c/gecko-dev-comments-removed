











use askama::Result;








pub fn docstring(
    docstring: &Option<String>,
    _: &dyn askama::Values,
    indent: usize,
) -> Result<String> {
    let Some(docstring) = docstring.as_deref() else {
        return Ok("".to_string());
    };
    let docstring = textwrap::dedent(docstring);
    let indent = " ".repeat(indent);
    
    let escaped = docstring.replace(r#"""""#, r#"\"\"\""#);
    let indented = textwrap::indent(&escaped, &indent);
    Ok(format!("\"\"\"\n{indented}\n\"\"\"\n{indent}"))
}


pub fn import_statement(module: &str, _: &dyn askama::Values) -> Result<String> {
    Ok(if module.starts_with('.') {
        let Some((from, name)) = module.rsplit_once('.') else {
            unreachable!()
        };
        let from = if from.is_empty() { "." } else { from };
        format!("from {from} import {name}")
    } else {
        format!("import {module}")
    })
}
